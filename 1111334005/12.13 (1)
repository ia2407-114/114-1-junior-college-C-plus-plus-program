#include <stdio.h>
#include <string.h>
#define SIZE 10


void copy1(char* s1, const char* s2) {
    while ((*s1++ = *s2++) != '\0');
}


void swap(int* a, int* b) {
    int t = *a;
    *a = *b;
    *b = t;
}

void swap_f(float* a, float* b) {
    float t = *a;
    *a = *b;
    *b = t;
}

void sort_by_id(char name[][20], int stu[][SIZE], float avg[], int n) {
    int i, j;
    char temp_name[20];

    for (i = 0; i < n - 1; i++) {
        for (j = 0; j < n - 1 - i; j++) {
            if (stu[0][j] > stu[0][j + 1]) {

                copy1(temp_name, name[j]);
                copy1(name[j], name[j + 1]);
                copy1(name[j + 1], temp_name);

                swap(&stu[0][j], &stu[0][j + 1]);
                swap(&stu[1][j], &stu[1][j + 1]);
                swap(&stu[2][j], &stu[2][j + 1]);
                swap_f(&avg[j], &avg[j + 1]);
            }
        }
    }
}


int binarySearch(int id[], int key, int low, int high) {
    while (low <= high) {
        int mid = (low + high) / 2;

        if (id[mid] == key)
            return mid;
        else if (key < id[mid])
            high = mid - 1;
        else
            low = mid + 1;
    }
    return -1;
}

int main() {
    const char* stu_name[SIZE] =
    { "Danny","Mary","Jimmy","Peter","Sue","John","Hearts","Diamonds","Clubs","Spades" };

    char name[SIZE][20];
    int i;

    for (i = 0; i < SIZE; i++)
        copy1(name[i], stu_name[i]);

    int stu[3][SIZE] = {
        {11,15,13,18,12,17,14,19,16,20},
        {85,92,78,85,90,85,76,95,88,85},
        {70,80,75,90,85,70,82,92,88,70}
    };

    float avg[SIZE];
    for (i = 0; i < SIZE; i++)
        avg[i] = (stu[1][i] + stu[2][i]) / 2.0;

 
    sort_by_id(name, stu, avg, SIZE);

    int key;
    printf("請輸入要查詢的學號：");
    scanf_s("%d", &key);

    int pos = binarySearch(stu[0], key, 0, SIZE - 1);

    if (pos != -1) {
        printf("\n找到學生資料：\n");
        printf("姓名：%s\n", name[pos]);
        printf("學號：%d\n", stu[0][pos]);
        printf("計概：%d\n", stu[1][pos]);
        printf("數學：%d\n", stu[2][pos]);
        printf("平均：%.2f\n", avg[pos]);
    }
    else {
        printf("查無此學號\n");
    }

    return 0;
}
