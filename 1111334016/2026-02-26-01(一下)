#define _CRT_SECURE_NO_WARNINGS
// Fig. 11.2: fig11_02.c
// Creating a sequential file
#include <stdio.h>
/*題目1. 根據上面的程式檔案，修改並建立3筆資料的循序檔案、
將全班3人的姓名、學號、數學成績、計概、平均成績放入檔案中*/
int main(void)
{
    FILE* cfPtr; //宣告FILE指標來識別開啟檔案   

    if ((cfPtr = fopen("clients.txt", "w")) == NULL) {
        puts("File could not be opened");
/*1.使用fopen()函數開啟檔案
  2."clients.txt"參數代表檔名或檔案完整路徑
  3."w"代表檔案開啟模式(w的功能是清除檔案內容後寫入)

    }
    else {
        puts("Enter the id, name,computer,math and avg.");
        puts("Enter EOF to end input.");
        printf("%s", "? ");

        unsigned int id; // unsigned是代表正整數
        char name[30]; // 
        int computer, math;
        double avg; 

        scanf("%d %29s %d %d", &id, name, &computer, &math);
       //%29s(可容納29個位元)
        avg = ((double)computer + math) / 2;
        
       
        while (!feof(stdin)) {

/*feof() 函數的全名是 File End Of File，檢查指定的檔案指標是否已經到達「結尾」（EOF）。
stdin代表 Standard Input（標準輸入），通常指的就是你的鍵盤輸入。
! (邏輯非)：這是「反向」的意思。
因此，!feof(stdin) 翻譯成白話文就是：「標準輸入還沒有結束（Not End Of File）」。
*/

            fprintf(cfPtr, "%d %s %d %d %.2f\n", id, name, computer, math, avg);
//輸出內容到檔案裡面。%.2f取到小數點第二位
            printf("%s", "? ");
            scanf("%d %29s %d %d %lf", &id, name, &computer, &math, &avg);
//%1f是浮點數的表示
        }

        fclose(cfPtr); // fclose closes file   
    }
}
/*如果你輸入了資料（沒按結束鍵Ctrl Z/EOF指令），它會將資料用 fprintf 寫入檔案，然後再顯示一個 ? 提示你輸入下一筆。
