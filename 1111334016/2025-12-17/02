#include <stdio.h>
#include <string.h>  //因為有字串

#define SIZE 10// 不用分號


int stu(char name[10][20], int me[3][10], float avg[10], int length);

int main() {
    char name[10][20];
    int me[3][10];
    float avg[10];
    int i;

    printf("請輸入 10 位同學的學號 姓名 計概成績 數學成績\n");
    for (i = 0; i < SIZE; i++) {
        printf("第 %d 位學生\n", i + 1);

        printf("學號: ");
        scanf_s("%d", &me[0][i]);

        printf("姓名: ");
        //scanf_s 讀取字串必須加上大小參數 20
        scanf_s("%s", name[i], 20);

        printf("計概成績: ");
        scanf_s("%d", &me[1][i]);

        printf("數學成績: ");
        scanf_s("%d", &me[2][i]);

        //使用 2.0f 避免 double 轉換 float 的警告
        avg[i] = (float)(me[1][i] + me[2][i]) / 2.0f;
        printf("平均成績: %.2f\n", avg[i]);
    }

    printf("\n    排序前的結果    \n");
    for (i = 0; i < SIZE; i++) {
        printf("學號:%d 姓名:%s 計概:%d 數學:%d 平均:%.2f\n",
            me[0][i], name[i], me[1][i], me[2][i], avg[i]);
    }

    // 呼叫排序
    stu(name, me, avg, SIZE);

    printf("\n    排序後的結果 (由小到大)    \n");
    for (i = 0; i < SIZE; i++) {
        printf("學號:%d 姓名:%s 計概:%d 數學:%d 平均:%.2f\n",me[0][i], name[i], me[1][i], me[2][i], avg[i]);
    }

    return 0;
}

int stu(char name[10][20], int me[3][10], float avg[10], int length) {
    int i, j, k, temp_id, temp_count, temp_math;
    float tempAvg;
    char tempName[20];

    for (i = 0; i < length - 1; i++) {
        for (j = 0; j < length - 1 - i; j++) {
            if (avg[j] > avg[j + 1]) {

                // 交換平均分數
                tempAvg = avg[j];
                avg[j] = avg[j + 1];
                avg[j + 1] = tempAvg;
                //交換學號
                temp_id = me[0][j];
                me[0][j] = me[0][j + 1];
                me[0][j + 1] = temp_id;
                //交換計蓋
                temp_count = me[1][j];
                me[1][j] = me[1][j + 1];
                me[1][j + 1] = temp_count;
                //交換數學
                temp_math = me[2][j];
                me[2][j] = me[2][j + 1];
                me[2][j + 1] = temp_math;


                // 交換姓名
                for (k = 0; k < 20; k++) {
                    tempName[k] = name[j][k];
                    name[j][k] = name[j + 1][k];
                    name[j + 1][k] = tempName[k];
//name[j] 和 name[j+1] 都是包含 20 個格子的字元陣列。這段 for 迴圈的用意是：從第 0 個字元開始，一直到第 19 個字元（k < 20）。
第一步： 把 name[j] 的第 k 個字元暫存在 tempName[k]。
第二步： 把 name[j+1] 的第 k 個字元覆蓋到 name[j]。
第三步： 把剛才暫存的 tempName[k] 放回 name[j+1]。
                }
            }
        }
    }
    return 0;
}
