#include <stdio.h>

int main()
{

    double p;          // 本金
    double r;          // 年利率
    double deposit;    // 每月定期存入金額
    double aims;       // 目標金額
    double amount;     // 當前總金額
    double monthly_rate;
    int month = 0;
    int year = 0;

         printf("請輸入本金：");
         scanf_s("%lf", &p);
         printf("請輸入年利率(小數表示，如0.05)：");
         scanf_s("%lf", &r);
         printf("請輸入每月定期存入金額：");
         scanf_s("%lf", &deposit);
         printf("請輸入存款目標金額：");
         scanf_s("%lf", &aims);

    amount = p;
    monthly_rate = r / 12.0;

    while (amount < aims) {
        month++;
        // 每月底先利息複利，然後存入定期金額
        amount = amount * (1 + monthly_rate) + deposit;

        // 每12個月(年底)輸出本利合
        if (month % 12 == 0) {
            year = month / 12;
            printf("第 %d 年：本利合 = %.2f\n", year, amount);
        }
    }

       // 輸出達成目標所需年數
    if (month % 12 == 0) {
        printf("共需 %d 年可達成目標。\n", month / 12);
    }
    else {
        // 如果不是整年，算成幾年幾個月
        year = month / 12;
        int extra_month = month % 12;
        printf("共需 %d 年 %d 個月可達成目標。\n", year, extra_month);
    }

    return 0;
}
