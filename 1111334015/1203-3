#include <stdio.h>

long long factorial(int n) {
    if (n == 0 || n == 1)
        return 1;
    return n * factorial(n - 1);
}
double power(double x, int n) {
    if (n == 0)
        return 1;
    return x * power(x, n - 1);
}

int main() {
    int m = 50;                
    double x;
    int n;

    int terms[50] = { 0 };      

    printf("請輸入 n (n < %d)：", m);
    scanf_s("%d", &n);

    printf("請輸入 x：");
    scanf_s("%lf", &x);

    double sum = 1.0;

    terms[0] = 1;

    for (int i = 1; i <= n; i++) {
        double term = power(x, i) / factorial(i);
        sum += term;

        terms[i] = (int)term;
    }

    printf("e^x 的近似值 = %.10f\n\n", sum);

    printf("級數每一項存入 terms[]：\n");
    for (int i = 0; i <= n; i++) {
        printf("terms[%d] = %d\n", i, terms[i]);
    }

    return 0;
}
