#include <stdio.h>

/* 遞迴計算 x 的 n 次方 */
double power(double x, int n)
{
    if (n == 0)
        return 1;
    else
        return x * power(x, n - 1);
}

/* 遞迴計算 n! */
int fact(int n)
{
    if (n == 0 || n == 1)
        return 1;
    else
        return n * fact(n - 1);
}

int main()
{
    int m;
    int n;
    int i;
    double x;
    double ex = 0.0;

    printf("請輸入陣列大小 m：");
    scanf_s("%d", &m);

    int terms[m]; // 大小為 m 的整數陣列

    printf("請輸入 n (n < m)：");
    scanf_s("%d", &n);

    printf("請輸入 x：");
    scanf_s("%lf", &x);

    for (i = 0; i <= n; i++)
    {
        double term = power(x, i) / fact(i);
        ex += term;
        terms[i] = (int)term; // 存入整數陣列（小數會被截掉）
    }

    printf("\ne^x 的近似值為：%f\n", ex);

    printf("\n級數各項存入 terms 陣列的值：\n");
    for (i = 0; i <= n; i++)
    {
        printf("terms[%d] = %d\n", i, terms[i]);
    }

    return 0;
}
