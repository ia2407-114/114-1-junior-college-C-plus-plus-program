#include <stdio.h>

#define SIZE 10

struct student {
    char name[20];
    int id;
    int computer;
    int math;
    double avg;
};

void calc_avg(struct student stu[], int n) {
    for (int i = 0; i < n; i++) {
        stu[i].avg = (stu[i].computer + stu[i].math) / 2.0;
    }
}

void swap(struct student* a, struct student* b) {
    struct student temp = *a;
    *a = *b;
    *b = temp;
}

void sort_by_avg(struct student stu[], int n) {
    for (int i = 0; i < n - 1; i++) {
        for (int j = 0; j < n - 1 - i; j++) {
            if (stu[j].avg < stu[j + 1].avg) {
                swap(&stu[j], &stu[j + 1]);   
            }
        }
    }
}

int main() {

    struct student stu[SIZE] = {
        {"Danny",    11, 85, 70, 0},
        {"Mary",     15, 92, 80, 0},
        {"Jimmy",    13, 78, 75, 0},
        {"Peter",    18, 85, 90, 0},
        {"Sue",      12, 90, 85, 0},
        {"John",     17, 85, 70, 0},
        {"Hearts",   14, 76, 82, 0},
        {"Diamonds", 19, 95, 92, 0},
        {"Clubs",    16, 88, 88, 0},
        {"Spades",   20, 85, 70, 0}
    };


    calc_avg(stu, SIZE);


    printf("排序前：\n");
    printf("姓名\t學號\t計概\t數學\t平均\n");
    for (int i = 0; i < SIZE; i++) {
        printf("%s\t%d\t%d\t%d\t%.2f\n",
            stu[i].name,
            stu[i].id,
            stu[i].computer,
            stu[i].math,
            stu[i].avg);
    }


    sort_by_avg(stu, SIZE);


    printf("\n排序後（依平均成績由大到小）：\n");
    printf("姓名\t學號\t計概\t數學\t平均\n");
    for (int i = 0; i < SIZE; i++) {
        printf("%s\t%d\t%d\t%d\t%.2f\n",
            stu[i].name,
            stu[i].id,
            stu[i].computer,
            stu[i].math,
            stu[i].avg);
    }

    return 0;
}

