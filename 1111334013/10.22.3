#include <stdio.h>

int main()
{
    double p, r, d, aims; //本金 利率 每年存入 目標金額
    int year = 0;
    int month; //月份迴圈
    double month_rate; //月利率

    printf("請輸入本金:");
    scanf_s("%lf", &p);

    printf("請輸入年利率:");
    scanf_s("%lf", &r);

    printf("請輸入每年定期存入的金額:");
    scanf_s("%lf", &d);

    printf("請輸入目標金額:");
    scanf_s("%lf", &aims);

    month_rate = r / 12.0; //年利率轉月利率

        while (p < aims) { //只要還沒達標就繼續按月計算
            year++; //新的一年
            for (month = 1; month <= 12; month++) {
                p = p * (1 + month_rate); //每月本金生利息
                p = p + d; //每月底存入固定金額

                if (p >= aims) { //提前達標就跳出迴圈
                    break;
                }
            }
            printf("第 %d 年後的本利合: %.2F \n", year, p);
        }

    printf("\n達成目標共需 %d 年! \n", year);

    return 0;
}
